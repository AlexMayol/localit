!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).localit={})}(this,(function(e){"use strict";let t="",o=localStorage;const n={},l=e=>t?`${t}_${e}`:e,s=e=>{if(!e)return null;const t=new Date,o={h:e=>t.setHours(t.getHours()+e),d:e=>t.setDate(t.getDate()+e),m:e=>t.setMinutes(t.getMinutes()+e),s:e=>t.setSeconds(t.getSeconds()+e)},n=Object.keys(o),l=e[e.length-1],s=Number(e.replace(l,""));return e.length<2||!n.some((e=>l===e))||isNaN(s)?(console.warn("ðŸ”¥ Localit: provide a valid expiration time format (e.g. '20h', '160s', '15d'). Your expiration date hasn't been saved."),null):o[l](s)},r=(e,...t)=>{if(n[e])for(let o=0;o<n[e].length;o++){(0,n[e][o])(...t)}},a=e=>{var t;const n=JSON.parse(o.getItem(l(e))||"''");return(null==(t=null==n?void 0:n.meta)?void 0:t.expiresAt)&&(s=n.meta.expiresAt,new Date>new Date(s))?(i(e),null):(null==n?void 0:n.value)||null;var s},i=e=>{r(l(e),null),o.removeItem(l(e))},u={config:({domain:e="",type:n="localStorage"})=>{o="localStorage"===n?localStorage:sessionStorage,t=e},set:(e,t,n=null)=>{if(!e)return console.error("ðŸ”¥ Localit: provide a key to store the value");const a={value:t,meta:{expiresAt:s(n)}};r(l(e),a),o.setItem(l(e),JSON.stringify(a))},get:a,on:(e,t)=>{const o=l(e);n[o]||(n[o]=[]),n[o].push(t)},remove:i,getAndRemove:e=>{const t=a(e);return i(e),t},setDomain:e=>t=e,clearDomain:(e=t)=>{for(const t of Object.keys(o))t.includes(`${e}`)&&(r(t,null),o.removeItem(t))},bust:()=>{o.clear(),Object.keys(n).map((e=>{r(e,null)}))}};e.localit=u,Object.defineProperty(e,"__esModule",{value:!0})}));
