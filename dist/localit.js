!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t((e="undefined"!=typeof globalThis?globalThis:e||self).localit={})}(this,(function(e){"use strict";let t="",o=localStorage;const n={},l=e=>`${t}_${e}`,s=e=>{const t=new Date,o={h:e=>t.setHours(t.getHours()+e),d:e=>t.setDate(t.getDate()+e),m:e=>t.setMinutes(t.getMinutes()+e),s:e=>t.setSeconds(t.getSeconds()+e)},n=Object.keys(o),l=e[e.length-1],s=Number(e.replace(l,""));if(!(e.length<2||!n.some((e=>l===e))||isNaN(s)))return o[l](s);console.warn("Localit: provide a valid expiration time format (e.g. '20h', '160s', '15d'). Your expiration date hasn't been saved.")},r=(e,...t)=>{if(!n[e])return null;for(let o=0;o<n[e].length;o++){(0,n[e][o])(...t)}},a=e=>{var n;console.log(t);const s=JSON.parse(o.getItem(l(e)));return(null==(n=null==s?void 0:s.meta)?void 0:n.expiresAt)&&(r=s.meta.expiresAt,new Date>new Date(r))?(i(e),null):(null==s?void 0:s.value)||null;var r},i=e=>{r(l(e),null),o.removeItem(l(e))},u={config:({domain:e=null,type:n="localStorage"})=>{o="localStorage"===n?localStorage:sessionStorage,t=e||""},set:(e,t,n)=>{if(!e)return console.error("Localit: provide a key to store the value");const a={value:t,meta:{expiresAt:n&&s(n)}};r(l(e),a),o.setItem(l(e),JSON.stringify(a))},get:a,on:(e,t)=>{n[e]||(n[e]=[]),n[e].push(t)},remove:i,getAndRemove:e=>{const t=a(e);return i(e),t},setDomain:e=>{t=e},clearDomain:(e=t)=>{for(const t of Object.keys(o))t.includes(`${e}_`)&&(r(t,null),o.removeItem(t))},bust:()=>{o.clear(),Object.keys(n).map((e=>{r(e,null)}))}};e.localit=u,Object.defineProperty(e,"__esModule",{value:!0})}));
